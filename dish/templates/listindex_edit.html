{% extends '_base.html' %}{% block title %}Create new List{% endblock %}{% block super-extra-head %}	{% load static %}	<link href="{% static 'dist/jquery/autocomplete/jquery-ui.min.css' %}" rel="stylesheet" >{% endblock %}{% block content %}<!-- Modal-1 Alert, No number in index --><div class="modal fade" id="modal_nonumber" tabindex="-1" role="dialog" aria-labelledby="modal_nonumber"><div class="modal-dialog" role="document"><div class="modal-content">	<div class="modal-header">		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>		<h1 style="margin-top:0px;">Alert</h1>	</div>	<div class="modal-body">		<b>Only numbers allowed in index</b>		</br></br>		<button type="button" class="btn btn-custom btn-lg btn-block" id="modal1_cancel" data-dismiss="modal">Ok</button>	</div></div></div></div><!-- Modal-1 END--><div class="well well-white"><h1>{{list.name|truncatechars:54 }}</h1>{% if list.description %}	{% if list.description|wordcount > 80 %}		<div id='desc_small' style="display:block;">{{ list.description|urlizetrunc:32|escape|linebreaks|truncatewords:80 }}		</div>		<div id="desc" style="display:none;">{{ list.description|urlizetrunc:65|escape|linebreaks }}		</div>	{% else %}		{{ list.description|urlizetrunc:32|escape|linebreaks }}	{% endif %}{% else %}	There is no description{% endif %}</div><div class="row">	<div class="col-xs-6">		<button  id="save2" class="btn btn-lg btn-custom btn-block"/>Save</button>	</div>	<div class="col-xs-6">		<a class="btn btn-custom btn-lg btn-block" href="/listedit/{{list.urlname}}/">Cancel</a>	</div></div><div class="well" style="margin-bottom:0px;"><h2 style="margin:2px;">Dishes in List:</h2>{% if dishlist.all.count > 0 %}<table class="table table-hover table-list table-white" width="100%" border="0" style="margin-bottom:0px;"><tbody>	{% for p in dishlist %}	<tr>		<td style="padding-bottom:2px; vertical-align:top; text-align:left;" width="65%">		<div style="display: inline;white-space:nowrap;">			<input id="index_{{p.index}}" class="form-control" type="text" name="index_dish" value="{{p.index}}" style="padding:1px;text-align:right;float:left; width:40px" maxlength="2" size="2" onkeypress="return event.charCode >= 48 && event.charCode <= 57"/>		</div>			<h2 style="margin-top: 0px; margin-bottom: 0px; margin-left: 8px; text-align:left; display:inline-block;">			<a id="dishname_{{p.dish.id}}" href="/dish/{{p.dish.urlname}}/" title="Go to Dish page">{{ p.dish.name|truncatechars:34 }}</a>			</h2>			<div id="{{p.dish.urlname}}" style="display:none;"></div>			{% if p.dish.othernames %}				<p style="display:inline-block; margin-bottom: 2px;"><b><i id="othernames_{{p.dish.id}}">{{p.dish.othernames}}</i></b></p>			{% endif %}			<p class="smallfont" style="margin-bottom:2px; margin-left:48px;">			{% for c in p.dish.cuisines.all|slice:":4" %}			  (<a href="/cuisine/{{c.urlname}}/" title="Go to: {{c.name}}">{{c.name|truncatechars:18}}</a>)			{% endfor %} (Added by: <a href="/foodie/{{p.owner}}/" title="Go to: {{p.owner}}">{{p.owner|truncatechars:18}}</a>)<br>			</p>			  <div id="cuisines_{{p.dish.id}}" style="display:none;">				{% for c in p.dish.cuisines.all|slice:":4" %}					({{c.name|truncatechars:18}}) 				{% endfor %}			  </div>			<p id="description_{{p.dish.id}}">				{{p.dish.description|urlizetrunc:44|truncatewords:48}}			</p>			{# to get dish name: #}			<div id="dishnamecomment_{{p.index}}" style="display:none;">				{{p.dish.name}}			</div>			{# Comments #}			{% if p.description %}				<div class="well well-white" style="padding:5px;">				{{ p.description|urlizetrunc:44|truncatewords:48|escape|linebreaks }}				</div>			{% endif %}		</td>		<td style="text-align: center;" width="35%">		{% if p.dish.photo_main %}		<a href="/photo/{{p.dish.favphoto.urlname}}" title="Go to photo page">			<img id="url_{{p.dish.id}}" src="{{p.dish.favphotomed}}" class="img-rounded"  alt="{{p.dish.name}}" width="100%">		</a>		{% else %}			<a href="/photonew/{{p.dish.id}}/" title="Upload photo for {{p.dish.name|truncatechars:24}}">				<img id="url_{{p.dish.id}}" src="{% static 'images/upload-med.jpg' %}" class="img-rounded" width="100%">			</a>		{% endif %}		</td>	</tr>	{% endfor %}	</tbody></table>{% else %}	There are no dishes in list{% endif %}</div><form  id="myform" enctype='multipart/form-data' action="." method="POST">	{% csrf_token %}	{{ form.non_field_errors }}	<input id="indexs" name="indexs" type="text"  style="display:none;"/>	<div class="row">		<div class="col-xs-6">			<button id="save1" class="btn btn-lg btn-custom btn-block" type="submit"/>Save</button>		</div>		<div class="col-xs-6">			<a class="btn btn-custom btn-lg btn-block" href="/list/{{list.urlname}}/">Cancel</a>		</div>	</div></form>
	{% block focus %}		<script type="text/javascript">			document.getElementById('index_1').focus();		</script>	{% endblock %}
{% endblock %}{% block extra-bottom %}<script src="{% static 'dist/jquery/autocomplete/jquery-ui.min.js' %}"></script><script>$( function() {	$('#myform').submit(function() {		// DO STUFF...		var numbers = /^[0-9]+$/;		//get the firstone the loop for the rest		var index_chain = $("#index_1").val();		result = numbers.test(index_chain);		if (result == false){			//Testing if first index is a number:			//If false, it isn't number, show alert			$('#modal_nonumber').modal('show');			return false;		}		var count = {{dishlist.all.count}}		//Countinuing testing after index 1		for (i=2; i < count+1; i++) {			var ii = $("#index_"+i).val();			console.log('Testing: '+ii);			var result = numbers.test(ii);			console.log(result);			if (result == false){				//False means it didn't passed test, it is not a number				console.log('En el if');				$('#modal_nonumber').modal('show');				return false;			}			else{				index_chain += "+"+ii;			}		}		$("#indexs").val(index_chain);		$("#modal_processing").modal('show');		return true; // return true will sumbit form	});});//Click save1 by clicking save2 because is out of the form$( "#save2" ).click(function() {	$( "#save1" ).click();});</script>{% endblock %}